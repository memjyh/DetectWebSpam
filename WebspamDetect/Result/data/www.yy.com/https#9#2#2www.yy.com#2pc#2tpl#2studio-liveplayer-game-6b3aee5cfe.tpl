https://www.yy.com/pc/tpl/studio-liveplayer-game-6b3aee5cfe.tpl
<html><head><style type="text/css">
.happypk-bgwrap .gold-gift-other_icon .one-plus,.hide{display:none}@keyframes pop-in{0%{transform:scale(.1,.1);opacity:.1}80%{transform:scale(1.1,1.1)}100%{transform:scale(1,1);opacity:1}}@keyframes slide-up{0%{transform:translate(0,100%)}100%{transform:translate(0,0)}}@keyframes slide-down{0%{transform:translate(0,0)}100%{transform:translate(0,100%)}}@keyframes fade-in{from{opacity:.1}to{opacity:1}}.happypk-bgwrap .pk-anchorname-wrap .otherpk-anchorname,.happypk-bgwrap .pk-anchorname-wrap .selfpk-anchorname{width:50px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;color:#fff}.happypk-bgwrap .gold-gift-self_icon .anchor-gift-num,.happypk-bgwrap .gold-gift-self_icon .one-plus{color:#f2a603}.happypk-bgwrap .pk-anchorname-wrap .selfpk-anchorname{float:left;margin-left:74px}.happypk-bgwrap .pk-anchorname-wrap .otherpk-anchorname{float:right;margin-right:74px}:root .gold-gift-other_icon .gift-icon-disabled,:root .gold-gift-self_icon .gift-icon-disabled{width:70px;height:70px;position:absolute;z-index:1}.happypk-bgwrap{width:400px;height:82px;margin:0 auto 2px;position:relative;display:none}.happypk-bgwrap .happypk-bg{width:400px;height:82px;background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/w-liveplayerHappyFight-happypk-bg-7af39dec5d.png);position:absolute;z-index:2}.happypk-bgwrap .gold-gift-self_icon{left:-80px;cursor:pointer}.happypk-bgwrap .gold-gift-self_icon .left-happyfight{transition:transform ease;border:3px solid #f2a603;clip:rect(0,32px,64px,0)}.happypk-bgwrap .gold-gift-self_icon .right{border:3px solid #f2a603;clip:rect(0,64px,64px,32px)}.happypk-bgwrap .gold-gift-other_icon{right:-80px}.happypk-bgwrap .gold-gift-other_icon .anchor-gift-num{color:#0baafc}.happypk-bgwrap .gold-gift-other_icon .left-happyfight{transition:transform ease;border:3px solid #0baafc;clip:rect(0,32px,64px,0)}.happypk-bgwrap .gold-gift-other_icon .right{border:3px solid #0baafc;clip:rect(0,64px,64px,32px)}.happypk-bgwrap .happypk-stepbg{width:336px;position:absolute;z-index:1;bottom:0;left:32px}.happypk-bgwrap .happypk-stepbg .happypk-lstepbg{width:50%;height:70px;float:left;background-color:#f2a603}.happypk-bgwrap .happypk-stepbg .happypk-rstepbg{width:50%;height:70px;float:right;background-color:#0baafc}.happypk-bgwrap .pkvictory-avatar-icon{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/w-happy-victory_icon-4942b4e4b1.png)}.happypk-bgwrap .pkeve-avatar-icon{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/w-happypk-eve_icon-8292ad9f7f.png)}.happypk-bgwrap .pkfail-avatar-icon{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/w-happypk-fail_icon-8882af641c.png)}.happypk-bgwrap .self-avator-icon{width:64px;height:64px;border-radius:50%;border:3px solid #f2a603;position:absolute;left:0;margin-top:12px}.happypk-bgwrap .other-avator-icon{width:64px;height:64px;border-radius:50%;border:3px solid #0baafc;margin-top:12px;position:absolute;right:0}.happypk-bgwrap .anchor-avator-icon{z-index:-2}.happypk-bgwrap .avator-vr{background-color:#000;opacity:.5;filter:alpha(opacity=50);z-index:-1}.happypk-bgwrap .happypk-title{color:#aaa;font-size:12px;margin-left:140px;margin-top:2px;line-height:27px;position:absolute;width:145px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-align:center}.happypk-bgwrap .pk-anchorname-wrap{position:absolute;bottom:18px;z-index:10;width:100%}.happypk-bgwrap .pk-anchorname-wrap .otherpk-anchorname,.happypk-bgwrap .pk-anchorname-wrap .selfpk-anchorname{line-height:32px}.happypk-bgwrap .pk-anchorname-wrap .pk-tips{font-size:14px;font-family:Microsoft Yahei;color:#ffea00;text-align:center;line-height:32px}.happypk-bgwrap .pk-anchorname-wrap .pk-tips .count-time{margin-left:10px;display:inline-block;position:relative}.happypk-bgwrap .pk-anchorname-wrap .pk-tips .count-time .count-time-item{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/w-liveplayer-happypk-time_icon-6ebdd2bb0a.png);width:11px;height:15px;display:inline-block;position:relative;top:2px;margin-right:4px}.happypk-bgwrap .pk-anchorname-wrap .pk-tips .count-time .count-time--item0{background-position:0 0}.happypk-bgwrap .pk-anchorname-wrap .pk-tips .count-time .count-time--item1{background-position:-16px 0}.happypk-bgwrap .pk-anchorname-wrap .pk-tips .count-time .count-time--item2{background-position:-32px 0}.happypk-bgwrap .pk-anchorname-wrap .pk-tips .count-time .count-time--item3{background-position:-48px 0}.happypk-bgwrap .pk-anchorname-wrap .pk-tips .count-time .count-time--item4{background-position:-64px 0}.happypk-bgwrap .pk-anchorname-wrap .pk-tips .count-time .count-time--item5{background-position:0 17px}.happypk-bgwrap .pk-anchorname-wrap .pk-tips .count-time .count-time--item6{background-position:-16px 17px}.happypk-bgwrap .pk-anchorname-wrap .pk-tips .count-time .count-time--item7{background-position:-32px 17px}.happypk-bgwrap .pk-anchorname-wrap .pk-tips .count-time .count-time--item8{background-position:-48px 17px}.happypk-bgwrap .pk-anchorname-wrap .pk-tips .count-time .count-time--item9{background-position:-64px 17px}.happypk-bgwrap .pk-anchorname-wrap .pk-begin-tips{text-align:center;position:relative;display:none;top:10px}.happypk-bgwrap .pk-anchorname-wrap .pk-begin-tips .pk-begin_icon{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/w-liveplayer-happypk-begin_icon-116a2d0cef.png);width:62px;height:26px;display:inline-block}.happypk-bgwrap .show-begin-tips .pk-begin-tips{display:block}.happypk-bgwrap .show-begin-tips .pk-tips{display:none}.happypk-bgwrap .pk-giftnum-wrap{position:absolute;bottom:0;z-index:10;width:100%}.happypk-bgwrap .pk-giftnum-wrap .selfpk-giftnum{float:left;margin-left:74px;line-height:18px;font-size:12px;color:#fff}.happypk-bgwrap .pk-giftnum-wrap .otherpk-giftnum{float:right;margin-right:74px;line-height:18px;font-size:12px;color:#fff}@-webkit-keyframes onePlus{0%{display:block;top:-22px;left:20px;opacity:1;filter:alpha(opacity=100)}33%{top:-42px;left:10px;opacity:.8;filter:alpha(opacity=80)}66%{top:-62px;left:16px;opacity:.3;filter:alpha(opacity=30)}100%{top:-92px;opacity:0;left:26px;filter:alpha(opacity=0);display:none}}@keyframes onePlus{0%{display:block;top:-22px;left:20px;opacity:1;filter:alpha(opacity=100)}33%{top:-42px;left:10px;opacity:.8;filter:alpha(opacity=80)}66%{top:-62px;left:16px;opacity:.3;filter:alpha(opacity=30)}100%{top:-92px;opacity:0;left:26px;filter:alpha(opacity=0);display:none}}.godoil-gift_icon:hover{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/godoil-gift-hov_ieicon-f4c22833e1.png)}.godoil-gift_icon,.gold-gift_icon{position:absolute;width:70px;height:70px;top:12px}.godoil-gift_icon .one-plus,.gold-gift_icon .one-plus{position:absolute;font-size:18px;font-weight:700;display:none}.godoil-gift_icon .show-one-plus,.gold-gift_icon .show-one-plus{display:block;top:-22px;left:20px;-webkit-animation-name:onePlus;-moz-animation-name:onePlus;-ms-animation-name:onePlus;-o-animation-name:onePlus;animation-name:onePlus;-webkit-animation-timing-function:linear;-moz-animation-timing-function:linear;-ms-animation-timing-function:linear;-o-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-duration:1s;-moz-animation-duration:1s;-ms-animation-duration:1s;-o-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;-moz-animation-fill-mode:forwards;-ms-animation-fill-mode:forwards;-o-animation-fill-mode:forwards;animation-fill-mode:forwards}.godoil-gift_icon .gift-num-range,.gold-gift_icon .gift-num-range{display:none}.godoil-gift_icon .git-num,.gold-gift_icon .git-num{font-size:12px;color:#fff;text-align:center;margin-top:41px;position:relative;z-index:1}.godoil-gift_icon{left:30px;top:-90px;cursor:pointer;display:none;background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/godoil-gift_ieicon-9c37444afb.png)}.godoil-gift_icon .anchor-gift-num,.godoil-gift_icon .one-plus{color:#f2a603}:root .godoil-gift_icon:hover{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/godoil-gift-hov_icon-8090af540e.png)}.godoil-gift_icon,:root .gold-gift_icon{position:absolute;width:70px;height:70px;top:12px}.godoil-gift_icon .one-plus,:root .gold-gift_icon .one-plus{position:absolute;font-size:18px;font-weight:700;display:none}.godoil-gift_icon .show-one-plus,:root .gold-gift_icon .show-one-plus{display:block;top:-22px;left:20px;-webkit-animation-name:onePlus;-moz-animation-name:onePlus;-ms-animation-name:onePlus;-o-animation-name:onePlus;animation-name:onePlus;-webkit-animation-timing-function:linear;-moz-animation-timing-function:linear;-ms-animation-timing-function:linear;-o-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-duration:1s;-moz-animation-duration:1s;-ms-animation-duration:1s;-o-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;-moz-animation-fill-mode:forwards;-ms-animation-fill-mode:forwards;-o-animation-fill-mode:forwards;animation-fill-mode:forwards}.godoil-gift_icon .full-loading,:root .gold-gift_icon .full-loading{display:none;top:3px;left:3px;width:64px;height:64px;position:absolute;z-index:1}.godoil-gift_icon .full-loading .full-loading-canvas,:root .gold-gift_icon .full-loading .full-loading-canvas{opacity:.4}.godoil-gift_icon .gift-num-range,:root .gold-gift_icon .gift-num-range{display:block;top:3px;left:3px;background-color:transparent;position:absolute;width:64px;height:64px;border-radius:50%;z-index:2}.godoil-gift_icon .gift-num-range .circle,:root .gold-gift_icon .gift-num-range .circle{box-sizing:border-box;border:3px solid transparent;clip:rect(0,64px,64px,32px);position:absolute;width:64px;height:64px;border-radius:50%}.godoil-gift_icon .gift-num-range .clip-auto,:root .gold-gift_icon .gift-num-range .clip-auto{clip:rect(auto,auto,auto,auto)}.godoil-gift_icon .gift-num-range .percent,:root .gold-gift_icon .gift-num-range .percent{box-sizing:border-box;top:-3px;left:-3px;position:absolute;width:64px;height:64px;border-radius:50%}.godoil-gift_icon .gift-num-range .wth0,:root .gold-gift_icon .gift-num-range .wth0{width:0}.godoil-gift_icon .git-num,:root .gold-gift_icon .git-num{font-size:12px;color:#fff;text-align:center;margin-top:41px;position:relative;z-index:1}:root .godoil-gift_icon{left:30px;top:-90px;cursor:pointer;background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/godoil-gift_icon-be5f741644.png);display:none}:root .godoil-gift_icon .anchor-gift-num{color:#f2a603}:root .godoil-gift_icon .one-plus{color:#f2a603}:root .godoil-gift_icon .left-happyfight{transition:transform ease;border:3px solid #f2a603;clip:rect(0,32px,64px,0)}:root .godoil-gift_icon .right{border:3px solid #f2a603;clip:rect(0,64px,64px,32px)}.gold-gift-self_icon{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/gold-gift-self_ieicon-038cc3e32f.png)}.gold-gift-self_icon .gift-icon-disabled{width:70px;height:70px;position:absolute;z-index:1;background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/gold-gift-disabled-ie-62f8dd8c8b.png)}.gold-gift-self_icon:hover{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/gold-gift-selfhov_ieicon-ec982ae098.png)}:root .gold-gift-self_icon:hover{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/gold-gift-self_icon-hover-5e4aaf6e30.png)}.gold-gift-other_icon{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/gold-gift-other_ieicon-036a25fc19.png)}.gold-gift-other_icon .gift-icon-disabled{width:70px;height:70px;position:absolute;z-index:1;background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/gold-gift-other-disie-55cd4c0779.png)}.gold-gift-other_icon:hover{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/gold-gift-otherhov_ieicon-424c946d65.png)}:root .gold-gift-other_icon:hover{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/gold-gift-self_icon-hover-5e4aaf6e30.png)}:root .gold-gift-self_icon{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/gold-gift-self_icon-d1f689ad14.png)}:root .gold-gift-self_icon .gift-icon-disabled{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/gold-gift-disabled-9e6b3532c6.png)}:root .gold-gift-other_icon{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/gold-gift-self_icon-d1f689ad14.png)}:root .gold-gift-other_icon .gift-icon-disabled{background-image:url(//yyweb.yystatic.com/pc/images/components/w-liveplayerHappyFight/images/gold-gift-disabled-9e6b3532c6.png)}
</style>
<script id="happypkContentTpl" type="text/html">
    <div id="attentionOtherAnthorWrap">
        <div class="attention-other-anchor" id="attentionOtherAnthor">
            <div class="no-attention-name" id="happyPkAnchorName"> </div>
            <div class="attention-other-btn" id="attentionOtherBtn">+</div>
        </div>
    </div>
    <div class="w-liveplayer-happy-fight" id="happyFightArea">
        <div class="happy-fightel" id="happyFightEl">
            <div class="happypk-bgwrap">
                <div class="happypk-bg">
                    <div class="happypk-title"></div>
                    <div class="leftpk-result-icon self-avator-icon"></div>
                    <div class="rightpk-result-icon other-avator-icon"></div><img class="self-avator-icon anchor-avator-icon" src="//yyweb.yystatic.com/pc/images/default_portrait-822f6a7747.jpg" /><img class="other-avator-icon anchor-avator-icon" src="//yyweb.yystatic.com/pc/images/default_portrait-822f6a7747.jpg" />
                    <div class="anchor-avator-upvr self-avator-icon"></div>
                    <div class="anchor-avator-upvr other-avator-icon"></div>
                </div>
                <div id="happypkMainInfo"></div>
            </div>
            <div class="godoil-gift_icon" id="godOil"></div>
        </div>
    </div>
</script>
<script id="happypkTempl" type="text/html">
    <div class="happypk-stepbg">
        <div class="happypk-lstepbg"></div>
        <div class="happypk-rstepbg"></div>
    </div>
    <div class="gold-gift_icon {{isShowGoldBtn ? (isOver ?'gold-gift-other_icon':'gold-gift-self_icon') : 'hide'}}" id="goldGiftBtn">
        <div class="{{ isDisabled ? 'gift-icon-disabled' : ''}}" id="giftDisabled"></div>
        <div class="full-loading"></div>
        <div class="one-plus" id="onePlus">+1</div>
        <div class="gift-num-range">
            <div class="circle">
                <div class="percent left-happyfight"></div>
                <div class="percent right wth0"></div>
            </div>
        </div>
        <div class="git-num"><span class="anchor-goldGift-num">{{isOver?(giftData.rgnum || 0) : (giftData.lgnum || 0)}}</span><span class="ceil-gift-num">/{{goldnum || 66}}</span></div>
    </div>
    <div class="pk-anchorname-wrap" id="pkAnchornameInfo">
        <div class="selfpk-anchorname">{{pkData.lnick}}</div>
        <div class="otherpk-anchorname">{{pkData.rnick}}</div>
        <div class="pk-tips"><span class="pk-step-title"> {{title}}</span>
            <div class="count-time" id="countTimeWrap"></div>
        </div>
        <div class="pk-begin-tips"><span class="pk-begin_icon"></span></div>
    </div>
    <div class="pk-giftnum-wrap">
        <div class="selfpk-giftnum">{{lnum}}</div>
        <div class="otherpk-giftnum">{{rnum}}</div>
    </div>
</script>
<script id="godOilTempl" type="text/html">
    <div class="one-plus" id="godOilOnePlus">+1</div>
    <div class="gift-num-range">
        <div class="circle">
            <div class="percent left-happyfight"></div>
            <div class="percent right wth0"></div>
        </div>
    </div>
    <div class="git-num"><span class="anchor-godOilGift-num">{{giftData.eraserNum || 0}}</span><span class="ceil-gift-num">/{{godNum || 20}}</span></div>
</script>
<script>
define("liveplayerHappyFight",["web2playerStudio","util","artTemplate"],function(t,e,n){var a,i,o=window.ShowDialog,r=window.$,s=window.user,l=window.pageInfo,p=window.statisticEvent,d={WLIVE_PLAYER:"#wLiveplayer",GOLD_GIFE_BTN:"#goldGiftBtn",GODOIL_GIFT_BTN:"#godOil",ONE_PLUS:"#onePlus",GODOIL_ONE_PLUS:"#godOilOnePlus",COUNT_ITME_WRAP:"#countTimeWrap",PK_ANCHORNAME_INFO:"#pkAnchornameInfo",HAPPYPK_EL:"#happyFightEl",HAPPYPK_MAIN_INFO:"#happypkMainInfo",ATTENTION_OTHER_BTN:"#attentionOtherBtn",ATTENTION_OTHER_ANTHOR:"#attentionOtherAnthor",HAPPYPK_ANCHOR_NAME:"#happyPkAnchorName",GIFT_DISABLED:"#giftDisabled"},c={pkLstepbg:".happypk-lstepbg",pkRstepbg:".happypk-rstepbg",pkTitle:".happypk-title",pkWrap:".happypk-bgwrap",pkStepTitle:".pk-step-title",selfAvatorIcon:".self-avator-icon.anchor-avator-icon",otherAvatorIcon:".other-avator-icon.anchor-avator-icon",leftpkResultIcon:".leftpk-result-icon",rightpkResultIcon:".rightpk-result-icon",anchorAvatorUpVr:".anchor-avator-upvr",attentionOtherAnchor:".attention-other-anchor",anchorGoldGift:".anchor-goldGift-num",anchorGodOilGift:".anchor-godOilGift-num",fullLoading:".full-loading"},u={pkData:{},giftData:{},initGiftData:{},initPkData:{},type:null,showBT:!1,isOver:!1,giftId:null,godoilId:null,cf_LENNUM:0,cf_CFNUM:0,goldPv:!1,godOilPv:!1};"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.sector=function(t,e,n,a,i){return this.save(),this.translate(t,e),this.beginPath(),this.arc(0,0,n,a,i),this.save(),this.rotate(i),this.moveTo(n,0),this.lineTo(0,0),this.restore(),this.rotate(a),this.lineTo(n,0),this.closePath(),this.restore(),this});var f={init:function(){var e=this;r("#gameArea").append(n("happypkContentTpl")),e.bindEvents(),e.reLayoutAttentionBtn(),t.entApp.onPCrossPKNotify(function(t){u.pkData=r.extend({},t),0==t.state&&0==t.type&&(u.giftData={lgnum:0,rgnum:0},u.goldPv=!1,r(".left-happyfight").eq(0).css("transform","rotate(0deg)")),e.renderPkContent({pkData:t,giftData:u.giftData||u.initGiftData})}),t.entApp.onPCrossPKArGiftInfoRsp(function(t){u.giftData=r.extend({},t),u.giftId=t.cf_CROWNGIFTID,u.godoilId=t.cf_ERASERGIFTID,u.cf_LENNUM=t.cf_LENNUM,u.cf_CFNUM=t.cf_CFNUM,u.showBT=!(!t.loserEfLvl||t.ltopcid!=l.sid),e.renderPkContent({pkData:u.pkData||u.initPkData,giftData:t})}),t.entApp.onPCrossPKArGiftLoser(function(t){t.loserEfLvl&&t.losertopcid==l.sid?u.showBT=!0:u.showBT=!1,e.renderPkContent({pkData:u.pkData||u.initPkData,giftData:t})}),t.entApp.onPCrossPKArGiftCrown(function(t){u.giftData=r.extend({},t),e.renderPkContent({pkData:u.pkData||u.initPkData,giftData:t})}),t.onFullscreen(function(t){e.setAttentionBtn(t)}),s.onAttention(function(t){u.pkData.ruid?s.isAttentionSync(u.pkData.ruid,t)&&r(d.ATTENTION_OTHER_ANTHOR).addClass("had-attention"):r(d.ATTENTION_OTHER_ANTHOR).removeClass("had-attention")})},setAttentionBtn:function(t){var e=r(t?"#player":"#wLiveplayer"),n=e.width()/2+10;r("#attentionOtherAnthorWrap").css("left",n+"px")},reLayoutAttentionBtn:function(){var t=this;t.setAttentionBtn(),r(window).on("resize",function(){t.setAttentionBtn()})},bindEvents:function(){r(d.WLIVE_PLAYER).on("click",d.GOLD_GIFE_BTN,function(){p.set({eventid:"20025017",act_type:"1"}),r(this).hasClass("gold-gift-self_icon")&&!r(d.GIFT_DISABLED).hasClass("gift-icon-disabled")&&u.giftId&&window.Gift.sendGiftById(u.giftId,1,function(t){return t?new o.POPUP({width:250,content:t||"请稍后再试！",timeout:!0}):(r(d.ONE_PLUS).addClass("show-one-plus"),void setTimeout(function(){r(d.ONE_PLUS).removeClass("show-one-plus")},1e3))})}),r(d.WLIVE_PLAYER).on("click",d.GODOIL_GIFT_BTN,function(){p.set({eventid:"20025017",act_type:"2"}),u.godoilId&&window.Gift.sendGiftById(u.godoilId,1,function(t){return t?new o.POPUP({width:250,content:t||"请稍后再试！",timeout:!0}):(r(d.GODOIL_ONE_PLUS).addClass("show-one-plus"),void setTimeout(function(){r(d.GODOIL_ONE_PLUS).removeClass("show-one-plus")},1e3))})}),r("body").on("click",d.ATTENTION_OTHER_BTN,function(){s.attention(u.pkData.ruid,function(t,e){t||new o.POPUP({width:250,content:e||"请稍后再试！",timeout:!0})})})},renderGodOil:function(t){var e=this;if(u.showBT&&2!=t.loserEf&&(void 0==t.eraserNum||t.eraserNum<u.cf_LENNUM)){r(d.GODOIL_GIFT_BTN).show(),u.godOilPv||(p.set({eventid:"20025017",act_type:"4"}),u.godOilPv=!0);var a=n("godOilTempl",{giftData:t,godNum:u.cf_LENNUM});r(d.GODOIL_GIFT_BTN).html(a);var i={cur:t.eraserNum||0,total:u.cf_LENNUM};e.renderCircleStep(i)}else r(d.GODOIL_GIFT_BTN).hide(),r(c.anchorGodOilGift).text(0),u.showBT=!1,r(".left-happyfight").eq(1).css("transform","rotate(0deg)"),u.godOilPv=!1},renderPkContent:function(t){if(!i){var o,f,h,g,m=this,v=t.pkData,T=t.giftData,_="";if(0===v.state)r(c.attentionOtherAnchor).hide(),r(c.pkWrap).hide(),m.renderGodOil(T);else if(1===v.state){r(c.pkWrap).show(),r(d.GODOIL_GIFT_BTN).hide(),r(".left-happyfight").eq(1).css("transform","rotate(0deg)"),r(c.attentionOtherAnchor).show(),r(d.HAPPYPK_ANCHOR_NAME).html(v.rnick),s.queryAttentionList(function(t){s.isAttentionSync(v.ruid,t)?r(d.ATTENTION_OTHER_ANTHOR).addClass("had-attention"):r(d.ATTENTION_OTHER_ANTHOR).removeClass("had-attention")});var I=0==u.pkData.lnum&&0==u.pkData.rnum?50:Math.round(u.pkData.lnum/(Number(u.pkData.rnum)+Number(u.pkData.lnum))*100),N=100-I,O="4"==v.type||"5"==v.type?v.title:"6"==v.type?v.pntitle:"";Number(v.rnum)>Number(v.lnum)&&Number(T.lgnum)<Number(u.cf_CFNUM)?u.isOver=!0:u.isOver=!1,!(v.lnum>0||v.rnum>0)||4!=v.type&&5!=v.type?o=!1:(o=!0,u.goldPv||(p.set({eventid:"20025017",act_type:"3"}),u.goldPv=!0)),f=v.lnum==v.rnum&&v.lnum>0,h={cur:v.lnum>v.rnum?T.lgnum||0:T.rgnum||0,total:u.cf_CFNUM};var k=v.lnum,A=v.rnum,D=e.unitFormat(k,2),P=e.unitFormat(A,2);g=!(!u.isOver&&!f),_=n("happypkTempl",{pkData:v,giftData:T,isOver:u.isOver,isShowGoldBtn:o,isEqually:f,goldnum:u.cf_CFNUM,lnum:D,rnum:P,title:"4"==v.type?"即将开始":"5"==v.type?"PK计时":"6"==v.type?"惩罚时间":"",isDisabled:g}),r(d.HAPPYPK_MAIN_INFO).html(_),r(c.pkTitle).html(O),m.renderAnchorAvatarImg(v),m.renderPkLengthRatio(I,N),m.renderCircleStep(h);var y={time:1e3,totalTime:1e3*v.ltime,cb:m.renderTimeToImg};if(m.renderTimeToImg(y,v),a&&(a.destory(),a=null),a=e.countDown(y),a.start(),m.renderAnchorVr(),1==T.crownEf&&T.ltopcid&&T.ltopcid==l.sid)if(e.UA.ie&&e.UA.ie<=8)r(d.GIFT_DISABLED).addClass("gift-icon-disabled"),setTimeout(function(){r(d.GOLD_GIFE_BTN).hasClass("gold-gift-other_icon")||r(d.GIFT_DISABLED).removeClass("gift-icon-disabled")},1e4);else if(!i){r(d.GIFT_DISABLED).addClass("gift-icon-disabled"),r(c.fullLoading).show(),r(c.fullLoading).html('<canvas class="full-loading-canvas" id="fullLoading"></canvas>');var C=-90,E=document.getElementById("fullLoading").getContext("2d");i=setInterval(function(){C>274?(r(d.GOLD_GIFE_BTN).hasClass("gold-gift-other_icon")||r(d.GIFT_DISABLED).removeClass("gift-icon-disabled"),clearInterval(i),i=null,u.giftData.crownEf=0,r(c.fullLoading).hide(),r("#fullLoading").remove()):(E.sector(32,32,32,Math.PI/180*-90,Math.PI/180*C).fill(),C+=3.6)},100)}}u.type=u.pkData.type}},renderAnchorAvatarImg:function(t){r(c.selfAvatorIcon).eq(0).attr("src",t.lhead_url),r(c.otherAvatorIcon).eq(0).attr("src",t.rhead_url)},renderCircleStep:function(t){t.total&&t.cur!=t.total&&(t.cur/t.total<.5?(r(".circle").removeClass("clip-auto"),r(".right").addClass("wth0")):t.cur/t.total>.5&&(r(".circle").addClass("clip-auto"),r(".right").removeClass("wth0")),r(".left-happyfight").css("transform","rotate("+t.cur/t.total*360+"deg)"))},renderTimeToImg:function(t,e){for(var n=t.totalTime/1e3,a=n.toString().split(""),i="",o=0;o<a.length;o++)i+='<span class="count-time-item count-time--item'+a[o]+'"></span>';r(d.COUNT_ITME_WRAP).html(i),0==t.totalTime&&setTimeout(function(){r(c.pkStepTitle).text(""),r(d.COUNT_ITME_WRAP).html(""),e&&4==e.type?(r(d.PK_ANCHORNAME_INFO).addClass("show-begin-tips"),setTimeout(function(){r(d.PK_ANCHORNAME_INFO).removeClass("show-begin-tips")},100)):e&&6==e.type&&(r(c.attentionOtherAnchor).hide(),r(c.pkWrap).hide(),r(c.anchorGoldGift).text(0),r(".left-happyfight").css("transform","rotate(0deg)"))},4)},renderAnchorVr:function(){u.type!==u.pkData.type&&6==u.pkData.type?(r(c.anchorAvatorUpVr).addClass("avator-vr"),Number(u.pkData.lnum)>Number(u.pkData.rnum)?(r(c.leftpkResultIcon).addClass("pkvictory-avatar-icon"),r(c.rightpkResultIcon).addClass("pkfail-avatar-icon")):u.pkData.lnum==u.pkData.rnum?(r(c.leftpkResultIcon).addClass("pkeve-avatar-icon"),r(c.rightpkResultIcon).addClass("pkeve-avatar-icon")):(r(c.leftpkResultIcon).addClass("pkfail-avatar-icon"),r(c.rightpkResultIcon).addClass("pkvictory-avatar-icon"))):u.type!==u.pkData.type&&6!=u.pkData.type&&(r(c.anchorAvatorUpVr).removeClass("avator-vr"),r(c.leftpkResultIcon).attr("class","leftpk-result-icon self-avator-icon"),r(c.rightpkResultIcon).attr("class","rightpk-result-icon other-avator-icon"))},renderPkLengthRatio:function(t,e){r(c.pkLstepbg).width(t+"%"),r(c.pkRstepbg).width(e+"%")}};return f}),require(["liveplayerHappyFight"],function(t){t.init()}),define("components/t-studio-liveplayer-game/t-studio-liveplayer-game.js",function(){});
</script>
<!-- - tpl--></head></html>